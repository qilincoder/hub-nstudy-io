import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as n,c as a,e as s}from"./app-BnHKSE1F.js";const t={},i=s(`<h2 id="操作环境说明-本操作基于proxmox-ve-8-1-0实操" tabindex="-1"><a class="header-anchor" href="#操作环境说明-本操作基于proxmox-ve-8-1-0实操"><span>操作环境说明，本操作基于proxmox-ve: 8.1.0实操</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># root@:~# pveversion -v</span>
proxmox-ve: <span class="token number">8.1</span>.0 <span class="token punctuation">(</span>running kernel: <span class="token number">6.5</span>.11-7-pve<span class="token punctuation">)</span>
pve-manager: <span class="token number">8.1</span>.3 <span class="token punctuation">(</span>running version: <span class="token number">8.1</span>.3/b46aac3b42da5d15<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="背景介绍" tabindex="-1"><a class="header-anchor" href="#背景介绍"><span>背景介绍</span></a></h2><blockquote><p>PVE按照后，发现root目录磁盘很小（我的磁盘是1T）有大量的磁盘未分配，本教程是把剩余的空间分配给root目录（包含交换分区--本硬件内存为64G，暂时不需要交换分区）使根目录可使用未分配的的磁盘空间。</p></blockquote><h2 id="操作步骤" tabindex="-1"><a class="header-anchor" href="#操作步骤"><span>操作步骤</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>lsblk <span class="token parameter variable">-f</span>
<span class="token function">df</span> <span class="token parameter variable">-T</span>
blkid
<span class="token function">fdisk</span> <span class="token parameter variable">-l</span>


<span class="token comment"># pve的根目录对应的文件系统：/dev/mapper/pve-root</span>
<span class="token comment"># vgdisplay用于查看卷组容量情况</span>
<span class="token comment"># pvdisplay查看物理卷的分配情况</span>
<span class="token comment"># pvcreate创建物理卷</span>
<span class="token comment"># mount挂载卷，umount去除挂载</span>

<span class="token comment"># 移除掉交换分区</span>
lvremove /dev/pve/swap

<span class="token comment"># pvdisplay</span>
<span class="token comment"># 查看 Allocated PE 确认可以分配的容量</span>

<span class="token comment"># 给根目录分配多24G磁盘</span>
lvextend <span class="token parameter variable">-L</span> +24G /dev/mapper/pve-root
<span class="token comment"># resize2fs 后才能使用</span>
resize2fs /dev/mapper/pve-root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="其他福利" tabindex="-1"><a class="header-anchor" href="#其他福利"><span>其他福利</span></a></h2><blockquote><p>有一台Ubuntu 22.04.3 LTS , 发现和PVE磁盘分配模式一样，主磁盘大量空间未分配<br> 下面命令是把剩余的所有空间分配给根目录</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># Ubuntu 22.04.3 LTS 扩展磁盘</span>
lvextend <span class="token parameter variable">-l</span> +100%free /dev/mapper/ubuntu--vg-ubuntu--lv
resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv

<span class="token comment"># 查看</span>
<span class="token function">df</span> <span class="token parameter variable">-hl</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),l=[i];function o(r,p){return n(),a("div",null,l)}const m=e(t,[["render",o],["__file","b80ed8.html.vue"]]),u=JSON.parse(`{"path":"/p2024/Linux/PVE/b80ed8.html","title":"PVE删除交换分区给root","lang":"zh-CN","frontmatter":{"permalink":"/p2024/Linux/PVE/b80ed8.html","lang":"zh-CN","title":"PVE删除交换分区给root","description":"PVE删除交换分区给root","isOriginal":true,"date":"2024-02-09T00:00:00.000Z","category":["PVE","PVE删除交换分区给root"],"tag":["PVE","PVE删除交换分区给root"],"head":[["meta",{"name":"keywords","content":"PVE,PVE删除交换分区给root"}],["meta",{"property":"og:url","content":"https://hub.nstudy.org/p2024/Linux/PVE/b80ed8.html"}],["meta",{"property":"og:site_name","content":"Jack's 新学习基地"}],["meta",{"property":"og:title","content":"PVE删除交换分区给root"}],["meta",{"property":"og:description","content":"PVE删除交换分区给root"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-09T03:43:15.000Z"}],["meta",{"property":"article:author","content":"Jack"}],["meta",{"property":"article:tag","content":"PVE"}],["meta",{"property":"article:tag","content":"PVE删除交换分区给root"}],["meta",{"property":"article:published_time","content":"2024-02-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-09T03:43:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"PVE删除交换分区给root\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-02-09T00:00:00.000Z\\",\\"dateModified\\":\\"2024-04-09T03:43:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jack\\",\\"url\\":\\"https://hub.nstudy.org\\"}]}"]],"star":true,"sticky":true},"headers":[{"level":2,"title":"操作环境说明，本操作基于proxmox-ve: 8.1.0实操","slug":"操作环境说明-本操作基于proxmox-ve-8-1-0实操","link":"#操作环境说明-本操作基于proxmox-ve-8-1-0实操","children":[]},{"level":2,"title":"背景介绍","slug":"背景介绍","link":"#背景介绍","children":[]},{"level":2,"title":"操作步骤","slug":"操作步骤","link":"#操作步骤","children":[]},{"level":2,"title":"其他福利","slug":"其他福利","link":"#其他福利","children":[]}],"git":{"createdTime":1712634195000,"updatedTime":1712634195000,"contributors":[{"name":"lizhiquan","email":"lizhiquan@jianke.com","commits":1}]},"readingTime":{"minutes":1.25,"words":376},"filePathRelative":"06.Linux/88.PVE/20240209_PVE删除交换分区给root.md","localizedDate":"2024年2月9日","excerpt":"<h2>操作环境说明，本操作基于proxmox-ve: 8.1.0实操</h2>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token comment\\"># root@:~# pveversion -v</span>\\nproxmox-ve: <span class=\\"token number\\">8.1</span>.0 <span class=\\"token punctuation\\">(</span>running kernel: <span class=\\"token number\\">6.5</span>.11-7-pve<span class=\\"token punctuation\\">)</span>\\npve-manager: <span class=\\"token number\\">8.1</span>.3 <span class=\\"token punctuation\\">(</span>running version: <span class=\\"token number\\">8.1</span>.3/b46aac3b42da5d15<span class=\\"token punctuation\\">)</span>\\n</code></pre></div>"}`);export{m as comp,u as data};
