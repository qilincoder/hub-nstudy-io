import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as t,e as n}from"./app-CcdNUK7S.js";const s={},o=n(`<h2 id="机器环境" tabindex="-1"><a class="header-anchor" href="#机器环境"><span>机器环境</span></a></h2><blockquote><p>本实践将在 Ubuntu 22.04.3LTS 系统上进行安装测试<br> docker 版本<code>Docker Engine - Community 24.0.6</code> ，原则上docker版本无影响</p></blockquote><h2 id="背景" tabindex="-1"><a class="header-anchor" href="#背景"><span>背景</span></a></h2><blockquote><p>某一天，k8s频频报磁盘压力，去服务器上一看，99%的磁盘使用，显然目前的磁盘空间不足，需要更大的磁盘承载资料。<br> 过了一段时间，新磁盘终于到了，并成功挂载到服务器上。目录为 <code>/data</code> , 容量为原来的10倍，终于可以开心的玩耍了。</p></blockquote><h2 id="操作步骤" tabindex="-1"><a class="header-anchor" href="#操作步骤"><span>操作步骤</span></a></h2><ol><li>查看原来docker目录</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> info <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;dir&quot;</span>

 Docker Root Dir: /var/lib/docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>停止docker服务 和 k8s 服务</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>systemctl stop kubelet
systemctl stop <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>迁移docker目录</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker
<span class="token function">mv</span> /var/lib/docker/* /data/docker/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>修改docker配置文件</li></ol><blockquote><p>vim /etc/docker/daemon.json</p></blockquote><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data-root&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/data/docker&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>启动docker服务 和 k8s 服务</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>systemctl start <span class="token function">docker</span>
systemctl start kubelet
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>验证docker目录是否迁移成功</li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> info <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;dir&quot;</span>
Docker Root Dir: /data/docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>尽情玩耍吧</li></ol>`,19),i=[o];function r(l,c){return a(),t("div",null,i)}const u=e(s,[["render",r],["__file","0b4b3e.html.vue"]]),m=JSON.parse(`{"path":"/p2024/Docker/0b4b3e.html","title":"迁移Docker目录","lang":"zh-CN","frontmatter":{"permalink":"/p2024/Docker/0b4b3e.html","lang":"zh-CN","title":"迁移Docker目录","description":"迁移Docker目录","isOriginal":true,"date":"2024-04-05T00:00:00.000Z","category":["docker"],"tag":["docker"],"head":[["meta",{"name":"keywords","content":"迁移Docker目录,docker"}],["meta",{"property":"og:url","content":"https://hub.nstudy.org/p2024/Docker/0b4b3e.html"}],["meta",{"property":"og:site_name","content":"Jack's 新学习基地"}],["meta",{"property":"og:title","content":"迁移Docker目录"}],["meta",{"property":"og:description","content":"迁移Docker目录"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-19T07:50:23.000Z"}],["meta",{"property":"article:author","content":"Jack"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:published_time","content":"2024-04-05T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-19T07:50:23.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"迁移Docker目录\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-04-05T00:00:00.000Z\\",\\"dateModified\\":\\"2024-04-19T07:50:23.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jack\\",\\"url\\":\\"https://hub.nstudy.org\\"}]}"]],"star":true,"sticky":true},"headers":[{"level":2,"title":"机器环境","slug":"机器环境","link":"#机器环境","children":[]},{"level":2,"title":"背景","slug":"背景","link":"#背景","children":[]},{"level":2,"title":"操作步骤","slug":"操作步骤","link":"#操作步骤","children":[]}],"git":{"createdTime":1713513023000,"updatedTime":1713513023000,"contributors":[{"name":"lizhiquan","email":"lizhiquan@jianke.com","commits":1}]},"readingTime":{"minutes":0.93,"words":280},"filePathRelative":"02.Docker/20240405_迁移Docker目录.md","localizedDate":"2024年4月5日","excerpt":"<h2>机器环境</h2>\\n<blockquote>\\n<p>本实践将在 Ubuntu 22.04.3LTS 系统上进行安装测试<br>\\ndocker 版本<code>Docker Engine - Community 24.0.6</code> ，原则上docker版本无影响</p>\\n</blockquote>\\n<h2>背景</h2>\\n<blockquote>\\n<p>某一天，k8s频频报磁盘压力，去服务器上一看，99%的磁盘使用，显然目前的磁盘空间不足，需要更大的磁盘承载资料。<br>\\n过了一段时间，新磁盘终于到了，并成功挂载到服务器上。目录为 <code>/data</code> , 容量为原来的10倍，终于可以开心的玩耍了。</p>\\n</blockquote>"}`);export{u as comp,m as data};
